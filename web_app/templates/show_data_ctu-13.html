
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>加密恶意流量检测系统</title>
    <!--图标显示-->
    <link rel="icon" href="../static/imgs/icon.svg" type="image/x-icon" />
    <link rel="shortcut icon" href="../static/imgs/icon.svg" type="image/x-icon" />
    <!--注意下面的引入顺序不要改变-->
    <!--上面是国外源，下面是国内源-->
    <!-- 引入 Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <!--<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css">-->
    <!-- 引入 jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!--<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->
    <!-- 引入 Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!--<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>-->
    <!--数据可视化-->
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <style>
        .carousel-inner .item img {
            max-height: 400px;  
            width: auto;
            margin: 0 auto; 
        }
    </style>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border-bottom: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
    </style>
    <body>
        <div class="container">
            <div class="row clearfix">
                <div class="col-md-12 column">
                    <div class="carousel slide" id="carousel-235440">
                        <ol class="carousel-indicators">
                            <li class="active" data-slide-to="0" data-target="#carousel-235440">
                            </li>
                            <li data-slide-to="1" data-target="#carousel-235440">
                            </li>
                            <li data-slide-to="2" data-target="#carousel-235440">
                            </li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="item active">
                                <img alt="" src="{{ url_for('static', filename='imgs/p1.jpg') }}" />
                                <div class="carousel-caption">
                                </div>
                            </div>
                            <div class="item">
                                <img alt="" src="{{ url_for('static', filename='imgs/p4.jpg') }}" />
                                <div class="carousel-caption">
                                </div>
                            </div>
                            <div class="item">
                                <img alt="" src="{{ url_for('static', filename='imgs/p7.jpg') }}" />
                                <div class="carousel-caption">
                                </div>
                            </div>
                        </div> <a class="left carousel-control" href="#carousel-235440" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a> <a class="right carousel-control" href="#carousel-235440" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
                    </div>
                    <nav class="navbar navbar-default" role="navigation">
                        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                            <ul class="nav navbar-nav">
                                <li class="active">
                                     <a href="http://127.0.0.1:5000/show_data_CTU-13">数据展示</a>
                                </li>
                                <li>
                                    <a href="http://127.0.0.1:5000/corr_analysis_CTU-13">相关性分析</a>
                                </li>
                                <li>
                                    <a href="http://127.0.0.1:5000/Boruta_ML_CTU-13">Boruta特征选择</a>
                                </li>
                                <li>
                                    <a href="http://127.0.0.1:5000/feature_lighting_CTU-13">特征轻量化</a>
                                </li>
                                <li>
                                    <a href="http://127.0.0.1:5000/">返回主页</a>
                                </li>
                            </ul>
                            <ul class="nav navbar-nav navbar-right">
                                <li>
                                     <a href="http://127.0.0.1:5000/teacher">教师祝语</a>
                                </li>
                                <li>
                                    <a href="http://127.0.0.1:5000/student">学生祝语</a>
                               </li>
                            </ul>
                        </div>
                        
                    </nav>
                    <div class="jumbotron">
                        <h1>
                            Hi Data!
                        </h1>
                        <p>
                            This is the data of detection of encrypted malicious traffic——CTU-13
                        </p>
                        <table style="font-size: 20px;">
                            <thead>
                                <tr>
                                    <th>Kinds</th>
                                    <th>numbers</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for name, size in data.items() %}
                                <tr>
                                    <td>{{ name }}</td>
                                    <td>{{ size }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        <!--<p>
                             <a class="btn btn-primary btn-large" href="#">开启体验之旅</a>
                        </p>-->
                        <svg id="myChart" width="960" height="500"></svg>
                        <script>
                            var data = JSON.parse('{{ data | tojson | safe }}');
                            var width = 960,
                                height = 500,
                                radius = Math.min(width, height) / 2;
                        
                            var color = d3.scaleOrdinal()
                                .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00","red","green","blue"]);
                        
                            var arc = d3.arc()
                                .outerRadius(radius - 10)
                                .innerRadius(0);
                        
                            var pie = d3.pie()
                                .sort(null)
                                .value(function(d) { return d.value; });
                        
                            var svg = d3.select("#myChart")
                                .attr("width", width)
                                .attr("height", height)
                                .append("g")
                                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");
                        
                            var g = svg.selectAll(".arc")
                                .data(pie(d3.entries(data)))
                                .enter().append("g")
                                .attr("class", "arc");
                        
                            g.append("path")
                                .attr("d", arc)
                                .style("fill", function(d) { return color(d.data.key); });
                        
                            // 添加图例
                            var legend = svg.selectAll(".legend")
                                .data(color.domain())
                                .enter().append("g")
                                .attr("class", "legend")
                                .attr("transform", function(d, i) { return "translate(0," + (i - color.domain().length / 2) * 20 + ")"; });
                        
                            legend.append("rect")
                                .attr("x", radius + 40)
                                .attr("width", 18)
                                .attr("height", 18)
                                .style("fill", color);
                        
                            legend.append("text")
                                .attr("x", radius + 64)
                                .attr("dy", "1.1em")
                                .style("text-anchor", "start")
                                .text(function(d) { return d; });
                            // 添加标题
                            svg.append("text")
                                .attr("x", 0)             
                                .attr("y", -height/2 +20)    
                                .attr("text-anchor", "middle")  
                                .style("font-size", "24px") 
                                .style("text-decoration", "underline")  
                                .text("各种类型流量占比");
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </body>
  </head>  
</html>